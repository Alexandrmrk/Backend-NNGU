{"version":3,"sources":["../../src/middleware/ErrorHandler.js"],"names":["error","req","res","next","console","status","httpStatus","httpError","ValidationError","statusCode","json","message","errorValidation","details","process","env","NODE_ENV"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEe,kBAAUA,KAAV,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2BC,IAA3B,EAAiC;AAC9CC,EAAAA,OAAO,CAACJ,KAAR,CAAcA,KAAd;AAEA,MAAMK,MAAM,GAAGL,KAAK,CAACM,UAAN,IAAoB,GAAnC;AACA,MAAMC,SAAS,GAAG,4BAAWF,MAAX,CAAlB;;AAEA,MAAIL,KAAK,YAAYQ,kCAArB,EAAsC;AACpCN,IAAAA,GAAG,CAACG,MAAJ,CAAWL,KAAK,CAACS,UAAjB;AACAP,IAAAA,GAAG,CAACQ,IAAJ,CAAS;AAAEL,MAAAA,MAAM,EAAEL,KAAK,CAACS,UAAhB;AAA4BE,MAAAA,OAAO,EAAEX,KAAK,CAACW,OAA3C;AAAoDC,MAAAA,eAAe,EAAEZ,KAAK,CAACa;AAA3E,KAAT;AACAV,IAAAA,IAAI;AAEJ;AACD;;AAED,MAAIQ,OAAJ;;AACA,MAAIG,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,OAAO,GAAGX,KAAK,CAACW,OAAN,IAAiB,eAA3B;AACD,GAFD,MAEO;AACLA,IAAAA,OAAO,GAAGJ,SAAS,CAACI,OAAV,IAAqB,eAA/B;AACD;;AAEDT,EAAAA,GAAG,CAACG,MAAJ,CAAWA,MAAX;AACAH,EAAAA,GAAG,CAACQ,IAAJ,CAAS;AAAEL,IAAAA,MAAM,EAANA,MAAF;AAAUM,IAAAA,OAAO,EAAPA;AAAV,GAAT;AACAR,EAAAA,IAAI;AACL","sourcesContent":["import httpErrors from 'http-errors';\nimport { ValidationError } from 'express-validation';\n\nexport default function (error, req, res, next) {\n  console.error(error);\n\n  const status = error.httpStatus || 500;\n  const httpError = httpErrors(status);\n\n  if (error instanceof ValidationError) {\n    res.status(error.statusCode);\n    res.json({ status: error.statusCode, message: error.message, errorValidation: error.details });\n    next();\n\n    return;\n  }\n\n  let message;\n  if (process.env.NODE_ENV !== 'production') {\n    message = error.message || 'Unknown error';\n  } else {\n    message = httpError.message || 'Unknown error';\n  }\n\n  res.status(status);\n  res.json({ status, message });\n  next();\n}\n"],"file":"ErrorHandler.js"}